//# sourceMappingURL=data:application/json;charset=utf-8;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL3ZhbHlyaWFuLmpzL3BsdWdpbnMvcmVxdWVzdC5qcyIsICIuLi9hcHAvYnVzaW5lc3MtbG9naWMvY3J5cHRvLWNhbGN1bGF0b3Itc2VydmljZS50cyIsICIuLi9hcHAvY29tbW9uL3N0b3JhZ2Utc2VydmljZS50cyIsICIuLi9ub2RlX21vZHVsZXMvdmFseXJpYW4uanMvbGliL2luZGV4LnRzIiwgIi4uL2FwcC9pbmRleC50c3giXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IGlzTm9kZUpzID0gQm9vbGVhbih0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLnZlcnNpb25zICYmIHByb2Nlc3MudmVyc2lvbnMubm9kZSk7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShvYmosIHByZWZpeCkge1xuICByZXR1cm4gT2JqZWN0LmtleXMob2JqKVxuICAgIC5tYXAoKHApID0+IHtcbiAgICAgIGxldCBrID0gcHJlZml4ID8gYCR7cHJlZml4fVske3B9XWAgOiBwO1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmpbcF0gPT09IFwib2JqZWN0XCIgPyBzZXJpYWxpemUob2JqW3BdLCBrKSA6IGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQob2JqW3BdKX1gO1xuICAgIH0pXG4gICAgLmpvaW4oXCImXCIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVVybCh1cmwsIG9wdGlvbnMgPSB7fSkge1xuICBsZXQgdSA9IC9eaHR0cHM/L2dpLnRlc3QodXJsKSA/IHVybCA6IG9wdGlvbnMudXJscy5iYXNlICsgdXJsO1xuXG4gIGxldCBwYXJ0cyA9IHUuc3BsaXQoXCI/XCIpO1xuICB1ID0gcGFydHNbMF0udHJpbSgpLnJlcGxhY2UoL15cXC9cXC8vLCBcIi9cIikucmVwbGFjZSgvXFwvJC8sIFwiXCIpLnRyaW0oKTtcblxuICBpZiAocGFydHNbMV0pIHtcbiAgICB1ICs9IGA/JHtwYXJ0c1sxXX1gO1xuICB9XG5cbiAgaWYgKGlzTm9kZUpzICYmIHR5cGVvZiBvcHRpb25zLnVybHMubm9kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG9wdGlvbnMudXJscy5ub2RlID0gb3B0aW9ucy51cmxzLm5vZGU7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudXJscy5hcGkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG9wdGlvbnMudXJscy5hcGkgPSBvcHRpb25zLnVybHMuYXBpLnJlcGxhY2UoL1xcLyQvZ2ksIFwiXCIpLnRyaW0oKTtcbiAgICAgIHUgPSB1LnJlcGxhY2Uob3B0aW9ucy51cmxzLmFwaSwgb3B0aW9ucy51cmxzLm5vZGUpO1xuICAgIH1cblxuICAgIGlmICghL15odHRwcz8vZ2kudGVzdCh1KSkge1xuICAgICAgdSA9IG9wdGlvbnMudXJscy5ub2RlICsgdTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdTtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHNvbmFyanMvY29nbml0aXZlLWNvbXBsZXhpdHlcbmZ1bmN0aW9uIFJlcXVlc3QoYmFzZVVybCA9IFwiXCIsIG9wdGlvbnMgPSB7fSkge1xuICBsZXQgdXJsID0gYmFzZVVybC5yZXBsYWNlKC9cXC8kL2dpLCBcIlwiKS50cmltKCk7XG4gIG9wdGlvbnMudXJscyA9IG9wdGlvbnMudXJscyB8fCB7fTtcbiAgbGV0IG9wdHMgPSB7XG4gICAgbWV0aG9kczogW1wiZ2V0XCIsIFwicG9zdFwiLCBcInB1dFwiLCBcInBhdGNoXCIsIFwiZGVsZXRlXCJdLFxuICAgIC4uLm9wdGlvbnMsXG4gICAgdXJsczoge1xuICAgICAgbm9kZTogb3B0aW9ucy51cmxzLm5vZGUgfHwgbnVsbCxcbiAgICAgIGFwaTogb3B0aW9ucy51cmxzLmFwaSB8fCBudWxsLFxuICAgICAgYmFzZTogb3B0aW9ucy51cmxzLmJhc2UgPyBvcHRpb25zLnVybHMuYmFzZSArIHVybCA6IHVybFxuICAgIH1cbiAgfTtcblxuICBhc3luYyBmdW5jdGlvbiByZXF1ZXN0KG1ldGhvZCwgdXJsLCBkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgaW5uZXJPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiBtZXRob2QudG9Mb3dlckNhc2UoKSxcbiAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgLi4ub3B0cyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgaWYgKCFpbm5lck9wdGlvbnMuaGVhZGVycy5BY2NlcHQpIHtcbiAgICAgIGlubmVyT3B0aW9ucy5oZWFkZXJzLkFjY2VwdCA9IFwiYXBwbGljYXRpb24vanNvblwiO1xuICAgIH1cblxuICAgIGxldCBhY2NlcHRUeXBlID0gaW5uZXJPcHRpb25zLmhlYWRlcnMuQWNjZXB0O1xuICAgIGxldCBjb250ZW50VHlwZSA9IGlubmVyT3B0aW9ucy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdIHx8IGlubmVyT3B0aW9ucy5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdIHx8IFwiXCI7XG5cbiAgICBpZiAoaW5uZXJPcHRpb25zLm1ldGhvZHMuaW5kZXhPZihtZXRob2QpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIpO1xuICAgIH1cblxuICAgIGlmIChkYXRhKSB7XG4gICAgICBpZiAoaW5uZXJPcHRpb25zLm1ldGhvZCA9PT0gXCJnZXRcIiAmJiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB1cmwgKz0gYD8ke3NlcmlhbGl6ZShkYXRhKX1gO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5uZXJPcHRpb25zLm1ldGhvZCAhPT0gXCJnZXRcIikge1xuICAgICAgICBpZiAoL2pzb24vZ2kudGVzdChjb250ZW50VHlwZSkpIHtcbiAgICAgICAgICBpbm5lck9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBmb3JtRGF0YTtcbiAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEZvcm1EYXRhKSB7XG4gICAgICAgICAgICBmb3JtRGF0YSA9IGRhdGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGksIGRhdGFbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpbm5lck9wdGlvbnMuYm9keSA9IGZvcm1EYXRhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocGFyc2VVcmwodXJsLCBvcHRzKSwgaW5uZXJPcHRpb25zKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGxldCBlcnIgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG4gICAgICBlcnIucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICBpZiAoaW5uZXJPcHRpb25zLnJlc29sdmVXaXRoRnVsbFJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgaWYgKC90ZXh0L2dpLnRlc3QoYWNjZXB0VHlwZSkpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG4gICAgfVxuXG4gICAgaWYgKC9qc29uL2dpLnRlc3QoYWNjZXB0VHlwZSkpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgcmVxdWVzdC5uZXcgPSAoYmFzZVVybCwgb3B0aW9ucykgPT4gUmVxdWVzdChiYXNlVXJsLCB7IC4uLm9wdHMsIC4uLm9wdGlvbnMgfSk7XG5cbiAgcmVxdWVzdC5vcHRpb25zID0gKGtleSwgdmFsdWUpID0+IHtcbiAgICBsZXQgcmVzdWx0ID0gb3B0cztcblxuICAgIGlmICh0eXBlb2Yga2V5ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGxldCBwYXJzZWQgPSBrZXkuc3BsaXQoXCIuXCIpO1xuICAgIGxldCBuZXh0O1xuXG4gICAgd2hpbGUgKHBhcnNlZC5sZW5ndGgpIHtcbiAgICAgIG5leHQgPSBwYXJzZWQuc2hpZnQoKTtcblxuICAgICAgbGV0IG5leHRJc0FycmF5ID0gbmV4dC5pbmRleE9mKFwiW1wiKSA+IC0xO1xuICAgICAgaWYgKG5leHRJc0FycmF5KSB7XG4gICAgICAgIGxldCBpZHggPSBuZXh0LnJlcGxhY2UoL1xcRC9naSwgXCJcIik7XG4gICAgICAgIG5leHQgPSBuZXh0LnNwbGl0KFwiW1wiKVswXTtcbiAgICAgICAgcGFyc2VkLnVuc2hpZnQoaWR4KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlZC5sZW5ndGggPiAwICYmIHR5cGVvZiByZXN1bHRbbmV4dF0gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmVzdWx0W25leHRdID0gbmV4dElzQXJyYXkgPyBbXSA6IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VkLmxlbmd0aCA9PT0gMCAmJiB0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmVzdWx0W25leHRdID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdCA9IHJlc3VsdFtuZXh0XTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIG9wdHMubWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IChyZXF1ZXN0W21ldGhvZF0gPSAodXJsLCBkYXRhLCBvcHRpb25zKSA9PiByZXF1ZXN0KG1ldGhvZCwgdXJsLCBkYXRhLCBvcHRpb25zKSkpO1xuXG4gIHJldHVybiByZXF1ZXN0O1xufVxuXG5jb25zdCByZXF1ZXN0ID0gUmVxdWVzdCgpO1xuXG5yZXF1ZXN0LmRlZmF1bHQgPSByZXF1ZXN0O1xubW9kdWxlLmV4cG9ydHMgPSByZXF1ZXN0O1xuIiwgIi8vIFdlIHdpbGwgY3JlYXRlIGEgaGFzaCBwb3dlciBjYWxjdWxhdG9yIGZvciBjcnlwdG9jdXJyZW5jaWVzIGFuZCBtaW5pbmcgaGFyZHdhcmQuXG4vLyBXZSB3aWxsIHVzZSB0aGUgY29pbmdlY2tvLWFwaSBhbmQgbWluZXJzdGF0cy1hcGkuXG5pbXBvcnQgUmVxdWVzdCBmcm9tIFwidmFseXJpYW4uanMvcGx1Z2lucy9yZXF1ZXN0LmpzXCI7XG5pbXBvcnQgeyBzdG9yYWdlU2VydmljZSB9IGZyb20gXCIuLi9jb21tb24vc3RvcmFnZS1zZXJ2aWNlXCI7XG5cbmNvbnN0IENvaW5HZWNrb1JlcXVlc3QgPSBSZXF1ZXN0Lm5ldyhcImh0dHBzOi8vYXBpLmNvaW5nZWNrby5jb20vYXBpL3YzXCIsIHtcbiAgbWV0aG9kczogW1wiZ2V0XCJdXG59KTtcblxuY29uc3QgTWluZXJzdGF0UmVxdWVzdCA9IFJlcXVlc3QubmV3KFwiaHR0cHM6Ly9hcGkubWluZXJzdGF0LmNvbS92Mi9jb2luc1wiLCB7XG4gIG1ldGhvZHM6IFtcImdldFwiXVxufSk7XG5cbmNvbnN0IE9uZURheUluTWlsbGlTZWNvbmRzID0gMTAwMCAqIDYwICogNjAgKiAyNDtcblxuZW51bSBBbGdvcml0aG1zRW51bSB7XG4gIFwiU0hBLTI1NlwiID0gXCJTSEEtMjU2XCIsXG4gIFwiU2NyeXB0XCIgPSBcIlNjcnlwdFwiLFxuICBcIkV0aGFzaFwiID0gXCJFdGhhc2hcIixcbiAgXCJFdGNoYXNoXCIgPSBcIkV0Y2hhc2hcIixcbiAgXCJFcXVpaGFzaFwiID0gXCJFcXVpaGFzaFwiLFxuICBcIlJhbmRvbVhcIiA9IFwiUmFuZG9tWFwiLFxuICBcIlgxMVwiID0gXCJYMTFcIlxufVxuXG5lbnVtIENvaW5FbnVtIHtcbiAgXCJCVENcIiA9IFwiQlRDXCIsXG4gIFwiRVRIXCIgPSBcIkVUSFwiLFxuICBcIkVUQ1wiID0gXCJFVENcIixcbiAgXCJYTVJcIiA9IFwiWE1SXCIsXG4gIFwiWkVDXCIgPSBcIlpFQ1wiLFxuICBcIkRBU0hcIiA9IFwiREFTSFwiLFxuICBcIkxUQ1wiID0gXCJMVENcIlxufVxuXG5lbnVtIENvaW5OYW1lc0VudW0ge1xuICBcIkJpdGNvaW5cIiA9IFwiQml0Y29pblwiLFxuICBcIkV0aGVyZXVtXCIgPSBcIkV0aGVyZXVtXCIsXG4gIFwiRXRoZXJldW0gQ2xhc3NpY1wiID0gXCJFdGhlcmV1bSBDbGFzc2ljXCIsXG4gIFwiTW9uZXJvXCIgPSBcIk1vbmVyb1wiLFxuICBcIlpjYXNoXCIgPSBcIlpjYXNoXCIsXG4gIFwiRGFzaFwiID0gXCJEYXNoXCIsXG4gIFwiTGl0ZWNvaW5cIiA9IFwiTGl0ZWNvaW5cIlxufVxuXG5pbnRlcmZhY2UgQ29pbkludGVyZmFjZSB7XG4gIGFsZ29yaXRobTogQWxnb3JpdGhtc0VudW07XG4gIGNvaW46IENvaW5FbnVtO1xuICBuYW1lOiBDb2luTmFtZXNFbnVtO1xuICBuZXR3b3JrX2hhc2hyYXRlOiBudW1iZXI7XG4gIHByaWNlOiBudW1iZXI7XG4gIHJld2FyZDogbnVtYmVyO1xuICB1cGRhdGVkOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBDYWxjdWxhdGlvblJlc3VsdCB7XG4gIG1pbmVkOiBudW1iZXI7XG4gIGluY29tZTogbnVtYmVyO1xuICBwb3dlckNvc3Q6IG51bWJlcjtcbiAgcHJvZml0OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBDYWxjdWxhdGlvbnNSZXN1bHQge1xuICBkYWlseTogQ2FsY3VsYXRpb25SZXN1bHQ7XG4gIHdlZWtseTogQ2FsY3VsYXRpb25SZXN1bHQ7XG4gIG1vbnRobHk6IENhbGN1bGF0aW9uUmVzdWx0O1xuICB5ZWFybHk6IENhbGN1bGF0aW9uUmVzdWx0O1xuICBjdXJyZW5jeTogc3RyaW5nO1xuICBwcmljZTogbnVtYmVyO1xufVxuXG5leHBvcnQgY29uc3QgQ3J5cHRvQ3VycmVuY2llcyA9IHtcbiAgQlRDOiB7IGlkOiBcImJpdGNvaW5cIiwgc3ltYm9sOiBcImJ0Y1wiLCBuYW1lOiBcIkJpdGNvaW5cIiB9LFxuICBFVEg6IHsgaWQ6IFwiZXRoZXJldW1cIiwgc3ltYm9sOiBcImV0aFwiLCBuYW1lOiBcIkV0aGVyZXVtXCIgfSxcbiAgRVRDOiB7IGlkOiBcImV0aGVyZXVtLWNsYXNzaWNcIiwgc3ltYm9sOiBcImV0Y1wiLCBuYW1lOiBcIkV0aGVyZXVtIENsYXNzaWNcIiB9LFxuICBYTVI6IHsgaWQ6IFwibW9uZXJvXCIsIHN5bWJvbDogXCJ4bXJcIiwgbmFtZTogXCJNb25lcm9cIiB9LFxuICBaRUM6IHsgaWQ6IFwiemNhc2hcIiwgc3ltYm9sOiBcInplY1wiLCBuYW1lOiBcIlpjYXNoXCIgfSxcbiAgREFTSDogeyBpZDogXCJkYXNoXCIsIHN5bWJvbDogXCJkYXNoXCIsIG5hbWU6IFwiRGFzaFwiIH0sXG4gIExUQzogeyBpZDogXCJsaXRlY29pblwiLCBzeW1ib2w6IFwibHRjXCIsIG5hbWU6IFwiTGl0ZWNvaW5cIiB9XG59O1xuXG5jb25zdCBDcnlwdG9DdXJyZW5jaWVzSWRzID0gW1wiYml0Y29pblwiLCBcImV0aGVyZXVtXCIsIFwiZXRoZXJldW0tY2xhc3NpY1wiLCBcIm1vbmVyb1wiLCBcInpjYXNoXCIsIFwiZGFzaFwiLCBcImxpdGVjb2luXCJdO1xuXG5leHBvcnQgZW51bSBDdXJyZW5jeUVudW0ge1xuICBcInVzZFwiID0gXCJ1c2RcIixcbiAgXCJldXJcIiA9IFwiZXVyXCIsXG4gIFwiZ2JwXCIgPSBcImdicFwiLFxuICBcImNhZFwiID0gXCJjYWRcIixcbiAgXCJhdWRcIiA9IFwiYXVkXCIsXG4gIFwiY2hmXCIgPSBcImNoZlwiLFxuICBcImNueVwiID0gXCJjbnlcIixcbiAgXCJydWJcIiA9IFwicnViXCIsXG4gIFwiYnJsXCIgPSBcImJybFwiLFxuICBcImhrZFwiID0gXCJoa2RcIixcbiAgXCJqcHlcIiA9IFwianB5XCIsXG4gIFwibXhuXCIgPSBcIm14blwiXG59XG5cbmV4cG9ydCBjbGFzcyBDYWxjdWxhdG9yU2VydmljZSB7XG4gIHByaXZhdGUgdXNlQ2FjaGUgPSAocGF0aCk6IGJvb2xlYW4gPT4ge1xuICAgIGxldCBkYXRlTm93ID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgY2FjaGUgPSBzdG9yYWdlU2VydmljZS5nZXQocGF0aCk7XG4gICAgaWYgKGNhY2hlKSB7XG4gICAgICBsZXQgY2FjaGVEYXRlID0gY2FjaGUuZGF0ZTtcbiAgICAgIGlmIChkYXRlTm93IC0gY2FjaGVEYXRlIDwgT25lRGF5SW5NaWxsaVNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBwcml2YXRlIHNldENhY2hlKHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xuICAgIGxldCBkYXRlTm93ID0gRGF0ZS5ub3coKTtcbiAgICBzdG9yYWdlU2VydmljZS5zZXQocGF0aCwge1xuICAgICAgdmFsdWUsXG4gICAgICBkYXRlOiBkYXRlTm93XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBwaW5nKCk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKHRoaXMudXNlQ2FjaGUoXCJwaW5nXCIpKSB7XG4gICAgICByZXR1cm4gc3RvcmFnZVNlcnZpY2UuZ2V0KFwicGluZy52YWx1ZVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IENvaW5HZWNrb1JlcXVlc3QuZ2V0KFwiL3BpbmdcIik7XG4gICAgdGhpcy5zZXRDYWNoZShcInBpbmdcIiwgcmVzcG9uc2UpO1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIGFzeW5jIGdldENvaW5zTGlzdCgpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmICh0aGlzLnVzZUNhY2hlKFwiY29pbnNMaXN0XCIpKSB7XG4gICAgICByZXR1cm4gc3RvcmFnZVNlcnZpY2UuZ2V0KFwiY29pbnNMaXN0LnZhbHVlXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IENvaW5HZWNrb1JlcXVlc3QuZ2V0KFwiL2NvaW5zL2xpc3RcIik7XG4gICAgdGhpcy5zZXRDYWNoZShcImNvaW5zTGlzdFwiLCByZXNwb25zZSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgYXN5bmMgZ2V0U3VwcG9ydGVkQ3VycmVuY2llcygpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmICh0aGlzLnVzZUNhY2hlKFwic3VwcG9ydGVkQ3VycmVuY2llc1wiKSkge1xuICAgICAgcmV0dXJuIHN0b3JhZ2VTZXJ2aWNlLmdldChcInN1cHBvcnRlZEN1cnJlbmNpZXMudmFsdWVcIik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQ29pbkdlY2tvUmVxdWVzdC5nZXQoXCIvc2ltcGxlL3N1cHBvcnRlZF92c19jdXJyZW5jaWVzXCIpO1xuICAgIHRoaXMuc2V0Q2FjaGUoXCJzdXBwb3J0ZWRDdXJyZW5jaWVzXCIsIHJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICBhc3luYyBnZXRQcmljZXMoKTogUHJvbWlzZTxhbnk+IHtcbiAgICBpZiAodGhpcy51c2VDYWNoZShcInByaWNlc1wiKSkge1xuICAgICAgcmV0dXJuIHN0b3JhZ2VTZXJ2aWNlLmdldChcInByaWNlcy52YWx1ZVwiKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBDb2luR2Vja29SZXF1ZXN0LmdldChcIi9zaW1wbGUvcHJpY2VcIiwge1xuICAgICAgaWRzOiBDcnlwdG9DdXJyZW5jaWVzSWRzLmpvaW4oXCIsXCIpLFxuICAgICAgdnNfY3VycmVuY2llczogT2JqZWN0LmtleXMoQ3VycmVuY3lFbnVtKS5qb2luKFwiLFwiKVxuICAgIH0pO1xuICAgIHRoaXMuc2V0Q2FjaGUoXCJwcmljZXNcIiwgcmVzcG9uc2UpO1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIGFzeW5jIGdldENvaW5zRGF0YSgpOiBQcm9taXNlPENvaW5JbnRlcmZhY2VbXT4ge1xuICAgIGlmICh0aGlzLnVzZUNhY2hlKFwiY29pbnNEYXRhXCIpKSB7XG4gICAgICByZXR1cm4gc3RvcmFnZVNlcnZpY2UuZ2V0KFwiY29pbnNEYXRhLnZhbHVlXCIpO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IE1pbmVyc3RhdFJlcXVlc3QuZ2V0KFwiL1wiLCB7XG4gICAgICBsaXN0OiBPYmplY3Qua2V5cyhDb2luRW51bSkuam9pbihcIixcIilcbiAgICB9KTtcbiAgICB0aGlzLnNldENhY2hlKFwiY29pbnNEYXRhXCIsIHJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICBhc3luYyBjYWxjdWxhdGVDb25Gb3JIYXNoUmF0ZSh7XG4gICAgY29pbk5hbWUsXG4gICAgaGFzaFJhdGUsXG4gICAgcG93ZXIsXG4gICAgcG93ZXJDb3N0LFxuICAgIGN1cnJlbmN5LFxuICAgIGFsZ29yaXRobVxuICB9OiB7XG4gICAgY29pbk5hbWU6IENvaW5FbnVtO1xuICAgIGhhc2hSYXRlOiBudW1iZXI7XG4gICAgcG93ZXI6IG51bWJlcjtcbiAgICBwb3dlckNvc3Q6IG51bWJlcjtcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICAgIGFsZ29yaXRobTogQWxnb3JpdGhtc0VudW07XG4gIH0pOiBQcm9taXNlPENhbGN1bGF0aW9uc1Jlc3VsdD4ge1xuICAgIGxldCBjb2lucyA9IGF3YWl0IHRoaXMuZ2V0Q29pbnNEYXRhKCk7XG4gICAgbGV0IHByaWNlc0ZvckFsbENvaW5zID0gYXdhaXQgdGhpcy5nZXRQcmljZXMoKTtcblxuICAgIGlmICghY29pbnMgfHwgIXByaWNlc0ZvckFsbENvaW5zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgbG9hZCBkYXRhXCIpO1xuICAgIH1cblxuICAgIGxldCBjb2luID0gY29pbnMuZmluZCgoY29pbikgPT4gY29pbi5jb2luID09PSBjb2luTmFtZSk7XG5cbiAgICBpZiAoIWNvaW4gfHwgIUNyeXB0b0N1cnJlbmNpZXNbY29pbk5hbWVdIHx8ICFwcmljZXNGb3JBbGxDb2luc1tDcnlwdG9DdXJyZW5jaWVzW2NvaW5OYW1lXS5pZF0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvaW4gbm90IGZvdW5kXCIpO1xuICAgIH1cblxuICAgIGlmIChjb2luLmFsZ29yaXRobSAhPT0gYWxnb3JpdGhtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbGdvcml0aG0gbm90IHN1cHBvcnRlZFwiKTtcbiAgICB9XG5cbiAgICBsZXQgcHJpY2UgPVxuICAgICAgcHJpY2VzRm9yQWxsQ29pbnNbQ3J5cHRvQ3VycmVuY2llc1tjb2luTmFtZV0uaWRdW2N1cnJlbmN5XSB8fFxuICAgICAgcHJpY2VzRm9yQWxsQ29pbnNbQ3J5cHRvQ3VycmVuY2llc1tjb2luTmFtZV0uaWRdLnVzZDtcblxuICAgIGNvbnN0IHJld2FyZCA9IGNvaW4ucmV3YXJkICogaGFzaFJhdGU7XG4gICAgY29uc3QgZGFpbHlNaW5lZCA9IHJld2FyZCAqIDI0O1xuICAgIGNvbnN0IGRhaWx5SW5jb21lID0gZGFpbHlNaW5lZCAqIHByaWNlO1xuICAgIGNvbnN0IGRhaWx5UG93ZXJDb3N0ID0gKHBvd2VyQ29zdCAvIDEwMDApICogcG93ZXIgKiAyNDtcbiAgICBjb25zdCBkYWlseVByb2ZpdCA9IGRhaWx5SW5jb21lIC0gZGFpbHlQb3dlckNvc3Q7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGFpbHk6IHtcbiAgICAgICAgbWluZWQ6IGRhaWx5TWluZWQsXG4gICAgICAgIGluY29tZTogZGFpbHlJbmNvbWUsXG4gICAgICAgIHBvd2VyQ29zdDogZGFpbHlQb3dlckNvc3QsXG4gICAgICAgIHByb2ZpdDogZGFpbHlQcm9maXRcbiAgICAgIH0sXG4gICAgICB3ZWVrbHk6IHtcbiAgICAgICAgbWluZWQ6IGRhaWx5TWluZWQgKiA3LFxuICAgICAgICBpbmNvbWU6IGRhaWx5SW5jb21lICogNyxcbiAgICAgICAgcG93ZXJDb3N0OiBkYWlseVBvd2VyQ29zdCAqIDcsXG4gICAgICAgIHByb2ZpdDogZGFpbHlQcm9maXQgKiA3XG4gICAgICB9LFxuICAgICAgbW9udGhseToge1xuICAgICAgICBtaW5lZDogZGFpbHlNaW5lZCAqIDMwLFxuICAgICAgICBpbmNvbWU6IGRhaWx5SW5jb21lICogMzAsXG4gICAgICAgIHBvd2VyQ29zdDogZGFpbHlQb3dlckNvc3QgKiAzMCxcbiAgICAgICAgcHJvZml0OiBkYWlseVByb2ZpdCAqIDMwXG4gICAgICB9LFxuICAgICAgeWVhcmx5OiB7XG4gICAgICAgIG1pbmVkOiBkYWlseU1pbmVkICogMzY1LFxuICAgICAgICBpbmNvbWU6IGRhaWx5SW5jb21lICogMzY1LFxuICAgICAgICBwb3dlckNvc3Q6IGRhaWx5UG93ZXJDb3N0ICogMzY1LFxuICAgICAgICBwcm9maXQ6IGRhaWx5UHJvZml0ICogMzY1XG4gICAgICB9LFxuICAgICAgY3VycmVuY3ksXG4gICAgICBwcmljZVxuICAgIH07XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcbiAgY29uc3QgY2FsY3VsYXRvclNlcnZpY2UgPSBuZXcgQ2FsY3VsYXRvclNlcnZpY2UoKTtcbiAgbGV0IHJlc3VsdHMgPSBhd2FpdCBjYWxjdWxhdG9yU2VydmljZS5jYWxjdWxhdGVDb25Gb3JIYXNoUmF0ZSh7XG4gICAgY29pbk5hbWU6IENvaW5FbnVtLkVUSCxcbiAgICBoYXNoUmF0ZTogMzAwMDAwMDAwMCxcbiAgICBwb3dlcjogMjYwMCxcbiAgICBwb3dlckNvc3Q6IDAuMSxcbiAgICBjdXJyZW5jeTogXCJ1c2RcIixcbiAgICBhbGdvcml0aG06IEFsZ29yaXRobXNFbnVtLkV0aGFzaFxuICB9KTtcbiAgY29uc29sZS5sb2cocmVzdWx0cyk7XG59XG5cbm1haW4oKTtcbiIsICJjb25zdCBLZXkgPSBcImhhc2gtcG93ZXItaW5jb21lLWNhbGN1bGF0b3JcIjtcbmV4cG9ydCBjbGFzcyBTdG9yYWdlU2VydmljZSB7XG4gIGRiOiBTdG9yYWdlO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRiID0gd2luZG93LmxvY2FsU3RvcmFnZSB8fCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2U7XG4gIH1cblxuICBwcml2YXRlIGdldERiKCk6IFJlY29yZDxzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2wsIGFueT4ge1xuICAgIGxldCBvYmo7XG5cbiAgICB0cnkge1xuICAgICAgb2JqID0gSlNPTi5wYXJzZSh0aGlzLmRiLmdldEl0ZW0oS2V5KSB8fCBcInt9XCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIG9iaiA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgZ2V0KGtleTogc3RyaW5nLCBmYWxsYmFjayA9IG51bGwpOiBhbnkgfCBudWxsIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5nZXREYigpO1xuXG4gICAgbGV0IHBhcnNlZCA9IGtleS5zcGxpdChcIi5cIik7XG4gICAgbGV0IG5leHQ7XG5cbiAgICB3aGlsZSAocGFyc2VkLmxlbmd0aCkge1xuICAgICAgbmV4dCA9IHBhcnNlZC5zaGlmdCgpO1xuICAgICAgaWYgKFxuICAgICAgICBuZXh0IGluIHJlc3VsdCA9PT0gZmFsc2UgfHxcbiAgICAgICAgKHBhcnNlZC5sZW5ndGggPiAwICYmIHR5cGVvZiByZXN1bHRbbmV4dF0gIT09IFwib2JqZWN0XCIpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSByZXN1bHRbbmV4dF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ID09PSBcInVuZGVmaW5lZFwiID8gZmFsbGJhY2sgOiByZXN1bHQ7XG4gIH1cblxuICBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5nZXREYigpO1xuICAgIGxldCBmaW5hbFJlc3VsdCA9IHJlc3VsdDtcblxuICAgIGxldCBwYXJzZWQgPSBrZXkuc3BsaXQoXCIuXCIpO1xuICAgIGxldCBuZXh0OiBzdHJpbmcgfCBudW1iZXI7XG5cbiAgICB3aGlsZSAocGFyc2VkLmxlbmd0aCkge1xuICAgICAgbmV4dCA9IHBhcnNlZC5zaGlmdCgpO1xuICAgICAgaWYgKFxuICAgICAgICBuZXh0IGluIHJlc3VsdCA9PT0gZmFsc2UgfHxcbiAgICAgICAgKHBhcnNlZC5sZW5ndGggPiAwICYmIHR5cGVvZiByZXN1bHRbbmV4dF0gIT09IFwib2JqZWN0XCIpXG4gICAgICApIHtcbiAgICAgICAgcmVzdWx0W25leHRdID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSByZXN1bHRbbmV4dF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0W25leHRdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0gcmVzdWx0W25leHRdO1xuICAgIH1cblxuICAgIHRoaXMuZGIuc2V0SXRlbShLZXksIEpTT04uc3RyaW5naWZ5KGZpbmFsUmVzdWx0KSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHN0b3JhZ2VTZXJ2aWNlID0gbmV3IFN0b3JhZ2VTZXJ2aWNlKCk7XG4iLCAiLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbi8qIGVzbGludC1kaXNhYmxlIHNvbmFyanMvY29nbml0aXZlLWNvbXBsZXhpdHkgKi9cbi8qKiogVm5vZGUgKioqL1xuXG5pbXBvcnQge1xuICBDaGlsZHJlbixcbiAgQ3VycmVudCxcbiAgRGlyZWN0aXZlLFxuICBEaXJlY3RpdmVzLFxuICBEb21FbGVtZW50LFxuICBJVm5vZGUsXG4gIFBsdWdpbixcbiAgUHJvcHMsXG4gIFJlc2VydmVkUHJvcHMsXG4gIFZhbHlyaWFuLFxuICBWYWx5cmlhbkNvbXBvbmVudCxcbiAgVm5vZGVDb21wb25lbnQsXG4gIFZub2RlV2l0aERvbVxufSBmcm9tIFwiLi9pbnRlcmZhY2VzXCI7XG5cbi8qKiogQ29uc3RhbnRzICoqKi9cbmNvbnN0IENvbXBvbmVudFN0cmluZyA9IFwiX19jb21wb25lbnRfX1wiO1xuY29uc3QgVGV4dFN0cmluZyA9IFwiI3RleHRcIjtcbmNvbnN0IGlzTm9kZUpzID0gQm9vbGVhbih0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLnZlcnNpb25zICYmIHByb2Nlc3MudmVyc2lvbnMubm9kZSk7XG5jb25zdCBVbmQgPSB1bmRlZmluZWQ7XG5cbi8qKiogVm5vZGUgKioqL1xuXG5jb25zdCBWbm9kZSA9IGZ1bmN0aW9uIFZub2RlKHRoaXM6IElWbm9kZSwgdGFnOiBzdHJpbmcsIHByb3BzOiBQcm9wcywgY2hpbGRyZW46IENoaWxkcmVuKSB7XG4gIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICB0aGlzLnRhZyA9IHRhZztcbn0gYXMgdW5rbm93biBhcyBJVm5vZGU7XG5cbmZ1bmN0aW9uIGlzVm5vZGUob2JqZWN0PzogdW5rbm93biB8IElWbm9kZSk6IG9iamVjdCBpcyBJVm5vZGUge1xuICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgVm5vZGU7XG59XG5cbmZ1bmN0aW9uIGlzQ29tcG9uZW50KGNvbXBvbmVudD86IHVua25vd24gfCBWYWx5cmlhbkNvbXBvbmVudCk6IGNvbXBvbmVudCBpcyBWYWx5cmlhbkNvbXBvbmVudCB7XG4gIHJldHVybiB0eXBlb2YgY29tcG9uZW50ID09PSBcImZ1bmN0aW9uXCIgfHwgKHR5cGVvZiBjb21wb25lbnQgPT09IFwib2JqZWN0XCIgJiYgY29tcG9uZW50ICE9PSBudWxsICYmIFwidmlld1wiIGluIGNvbXBvbmVudCk7XG59XG5cbmZ1bmN0aW9uIGlzVm5vZGVDb21wb25lbnQodm5vZGU/OiB1bmtub3duIHwgVm5vZGVDb21wb25lbnQpOiB2bm9kZSBpcyBWbm9kZUNvbXBvbmVudCB7XG4gIHJldHVybiB2bm9kZSBpbnN0YW5jZW9mIFZub2RlICYmIHZub2RlLnRhZyA9PT0gQ29tcG9uZW50U3RyaW5nO1xufVxuXG4vKioqIFV0aWwgKioqL1xuXG5mdW5jdGlvbiBjcmVhdGVEb21FbGVtZW50KHRhZzogc3RyaW5nLCBpc1NWRzogYm9vbGVhbiA9IGZhbHNlKSB7XG4gIHJldHVybiBpc1NWRyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHRhZykgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG59XG5cbmZ1bmN0aW9uIGRvbVRvVm5vZGUoZG9tOiBEb21FbGVtZW50KTogdm9pZCB8IFZub2RlV2l0aERvbSB7XG4gIGlmIChkb20ubm9kZVR5cGUgPT09IDMpIHtcbiAgICBsZXQgdm5vZGUgPSB2KFRleHRTdHJpbmcsIHt9LCBbXSk7XG4gICAgdm5vZGUubm9kZVZhbHVlID0gZG9tLm5vZGVWYWx1ZSBhcyBzdHJpbmc7XG4gICAgdm5vZGUuZG9tID0gZG9tO1xuICAgIHJldHVybiB2bm9kZSBhcyBWbm9kZVdpdGhEb207XG4gIH1cblxuICBpZiAoZG9tLm5vZGVUeXBlID09PSAxKSB7XG4gICAgbGV0IGNoaWxkcmVuID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb20uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGNoaWxkID0gZG9tVG9Wbm9kZShkb20uY2hpbGROb2Rlc1tpXSBhcyBEb21FbGVtZW50KTtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcHJvcHM6IFByb3BzID0ge307XG4gICAgW10uZm9yRWFjaC5jYWxsKGRvbS5hdHRyaWJ1dGVzLCAocHJvcDogQXR0cikgPT4gKHByb3BzW3Byb3Aubm9kZU5hbWVdID0gcHJvcC5ub2RlVmFsdWUpKTtcblxuICAgIGxldCB2bm9kZSA9IHYoZG9tLnRhZ05hbWUudG9Mb3dlckNhc2UoKSwgcHJvcHMsIC4uLmNoaWxkcmVuKTtcbiAgICB2bm9kZS5kb20gPSBkb207XG4gICAgcmV0dXJuIHZub2RlIGFzIFZub2RlV2l0aERvbTtcbiAgfVxufVxuXG5jb25zdCB0cnVzdCA9IChodG1sU3RyaW5nOiBzdHJpbmcpOiBDaGlsZHJlbiA9PiB7XG4gIGxldCBkaXYgPSBjcmVhdGVEb21FbGVtZW50KFwiZGl2XCIpO1xuICBkaXYuaW5uZXJIVE1MID0gaHRtbFN0cmluZy50cmltKCk7XG5cbiAgcmV0dXJuIFtdLm1hcC5jYWxsKGRpdi5jaGlsZE5vZGVzLCAoaXRlbSkgPT4gZG9tVG9Wbm9kZShpdGVtKSkgYXMgQ2hpbGRyZW47XG59O1xuXG5jb25zdCByZXNlcnZlZFByb3BzOiBSZXNlcnZlZFByb3BzID0ge1xuICBrZXk6IHRydWUsXG4gIHN0YXRlOiB0cnVlLFxuICBvbmNyZWF0ZTogdHJ1ZSxcbiAgb251cGRhdGU6IHRydWUsXG4gIG9ucmVtb3ZlOiB0cnVlLFxuICBzaG91bGR1cGRhdGU6IHRydWUsXG4gIFwidi1vbmNlXCI6IHRydWUsXG5cbiAgLy8gQnVpbHQgaW4gZGlyZWN0aXZlc1xuICBcInYtaWZcIjogdHJ1ZSxcbiAgXCJ2LXVubGVzc1wiOiB0cnVlLFxuICBcInYtZm9yXCI6IHRydWUsXG4gIFwidi1zaG93XCI6IHRydWUsXG4gIFwidi1jbGFzc1wiOiB0cnVlLFxuICBcInYtaHRtbFwiOiB0cnVlLFxuICBcInYtbW9kZWxcIjogdHJ1ZVxufTtcblxuLyoqKiBNb3VudCAqKiovXG5cbmNvbnN0IGV2ZW50TGlzdGVuZXJOYW1lczogUmVjb3JkPHN0cmluZywgdHJ1ZT4gPSB7fTtcbmxldCBvbkNsZWFudXBMaXN0OiBGdW5jdGlvbltdID0gW107XG5sZXQgb25Nb3VudExpc3Q6IEZ1bmN0aW9uW10gPSBbXTtcbmxldCBvblVwZGF0ZUxpc3Q6IEZ1bmN0aW9uW10gPSBbXTtcbmxldCBvblVubW91bnRMaXN0OiBGdW5jdGlvbltdID0gW107XG5jb25zdCBjdXJyZW50OiBDdXJyZW50ID0ge307XG5mdW5jdGlvbiBldmVudExpc3RlbmVyKGU6IEV2ZW50KSB7XG4gIGxldCBkb20gPSBlLnRhcmdldCBhcyBEb21FbGVtZW50O1xuICBsZXQgbmFtZSA9IGB2LW9uJHtlLnR5cGV9YDtcbiAgd2hpbGUgKGRvbSkge1xuICAgIGlmIChkb21bbmFtZV0pIHtcbiAgICAgIGRvbVtuYW1lXShlLCBkb20pO1xuICAgICAgaWYgKCFlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgdXBkYXRlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRvbSA9IGRvbS5wYXJlbnROb2RlIGFzIERvbUVsZW1lbnQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25DbGVhbnVwKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICBpZiAob25DbGVhbnVwTGlzdC5pbmRleE9mKGNhbGxiYWNrKSA9PT0gLTEpIHtcbiAgICBvbkNsZWFudXBMaXN0LnB1c2goY2FsbGJhY2spO1xuICB9XG59XG5mdW5jdGlvbiBvblVubW91bnQoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gIGlmIChvblVubW91bnRMaXN0LmluZGV4T2YoY2FsbGJhY2spID09PSAtMSkge1xuICAgIG9uVW5tb3VudExpc3QucHVzaChjYWxsYmFjayk7XG4gIH1cbn1cbmZ1bmN0aW9uIG9uTW91bnQoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gIGlmIChvbk1vdW50TGlzdC5pbmRleE9mKGNhbGxiYWNrKSA9PT0gLTEpIHtcbiAgICBvbk1vdW50TGlzdC5wdXNoKGNhbGxiYWNrKTtcbiAgfVxufVxuZnVuY3Rpb24gb25VcGRhdGUoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gIGlmIChvblVwZGF0ZUxpc3QuaW5kZXhPZihjYWxsYmFjaykgPT09IC0xKSB7XG4gICAgb25VcGRhdGVMaXN0LnB1c2goY2FsbGJhY2spO1xuICB9XG59XG5cbi8qXG4gICogTW91bnRzIGEgY29tcG9uZW50IHRvIHRoZSBET01cbiAgbW91bnQoJyNhcHAnLCAoKSA9PiA8ZGl2PkhlbGxvIHdvcmxkPC9kaXY+KTsgLy8gQXBwIGlzIGEgRnVuY3Rpb25hbCBDb21wb25lbnRcbiAgbW91bnQoJyNhcHAnLCB7IHZpZXc6ICgpID0+IDxkaXY+SGVsbG8gd29ybGQ8L2Rpdj4gfSk7IC8vIEFwcCBpcyBhIFBPSk8gY29tcG9uZW50IHdpdGggYSB2aWV3IG1ldGhvZFxuICBtb3VudCgnI2FwcCcsIGNsYXNzSW5zdGFuY2UpOyAvLyBBcHAgaXMgYSBjbGFzcyBpbnN0YW5jZSB3aXRoIGEgdmlldyBtZXRob2RcbiAgbW91bnQoJyNhcHAnLCA8QXBwPjxkaXY+SGVsbG8gd29ybGQ8L2Rpdj48L0FwcD4pOyAvLyBBcHAgaXMgYSBWbm9kZSBjb21wb25lbnQgKFZub2RlIHdpdGggdGFnIF9fY29tcG9uZW50X18pXG4qL1xuXG5mdW5jdGlvbiBtb3VudChjb250YWluZXI6IERvbUVsZW1lbnQgfCBzdHJpbmcsIGNvbXBvbmVudDogVmFseXJpYW5Db21wb25lbnQgfCBJVm5vZGUpOiB2b2lkIHwgc3RyaW5nIHtcbiAgbGV0IGFwcENvbnRhaW5lciA9IG51bGw7XG5cbiAgaWYgKGlzTm9kZUpzKSB7XG4gICAgYXBwQ29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lciA9PT0gXCJzdHJpbmdcIiA/IGNyZWF0ZURvbUVsZW1lbnQoY29udGFpbmVyID09PSBcInN2Z1wiID8gXCJzdmdcIiA6IFwiZGl2XCIsIGNvbnRhaW5lciA9PT0gXCJzdmdcIikgOiBjb250YWluZXI7XG4gIH0gZWxzZSB7XG4gICAgYXBwQ29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lciA9PT0gXCJzdHJpbmdcIiA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29udGFpbmVyKVswXSA6IGNvbnRhaW5lcjtcbiAgfVxuXG4gIGlmICghYXBwQ29udGFpbmVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udGFpbmVyIG5vdCBmb3VuZFwiKTtcbiAgfVxuXG4gIGxldCB2bm9kZUNvbXBvbmVudDogVm5vZGVDb21wb25lbnQgfCBJVm5vZGU7XG5cbiAgaWYgKGlzVm5vZGVDb21wb25lbnQoY29tcG9uZW50KSkge1xuICAgIHZub2RlQ29tcG9uZW50ID0gY29tcG9uZW50O1xuICB9IGVsc2UgaWYgKGlzQ29tcG9uZW50KGNvbXBvbmVudCkpIHtcbiAgICB2bm9kZUNvbXBvbmVudCA9IHYoY29tcG9uZW50LCB7fSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IG11c3QgYmUgYSBWYWx5cmlhbiBDb21wb25lbnQgb3IgYSBWbm9kZSBjb21wb25lbnRcIik7XG4gIH1cblxuICBpZiAodi5pc01vdW50ZWQpIHtcbiAgICB1bm1vdW50KCk7XG4gIH1cblxuICB2LmNvbXBvbmVudCA9IHZub2RlQ29tcG9uZW50IGFzIFZub2RlQ29tcG9uZW50O1xuICB2LmNvbnRhaW5lciA9IGFwcENvbnRhaW5lcjtcbiAgdi5tYWluVm5vZGUgPSBkb21Ub1Zub2RlKGFwcENvbnRhaW5lcikgYXMgVm5vZGVXaXRoRG9tO1xuXG4gIC8vIHVwZGF0ZVxuICByZXR1cm4gdXBkYXRlKCk7XG59XG5cbmZ1bmN0aW9uIGNhbGxDYWxsYmFja0xpc3QobGlzdDogRnVuY3Rpb25bXSk6IHZvaWQge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBsaXN0W2ldKCk7XG4gIH1cbiAgbGlzdCA9IFtdO1xufVxuXG5mdW5jdGlvbiB1cGRhdGUoKTogdm9pZCB8IHN0cmluZyB7XG4gIGlmICh2LmNvbXBvbmVudCAmJiB2Lm1haW5Wbm9kZSkge1xuICAgIG9uQ2xlYW51cExpc3QubGVuZ3RoICYmIGNhbGxDYWxsYmFja0xpc3Qob25DbGVhbnVwTGlzdCk7XG4gICAgbGV0IG9sZFZub2RlOiBWbm9kZVdpdGhEb20gfCBudWxsID0gdi5tYWluVm5vZGUgYXMgVm5vZGVXaXRoRG9tO1xuICAgIHYubWFpblZub2RlID0gbmV3IFZub2RlKHYubWFpblZub2RlLnRhZywgdi5tYWluVm5vZGUucHJvcHMsIFt2LmNvbXBvbmVudF0pIGFzIFZub2RlV2l0aERvbTtcbiAgICB2Lm1haW5Wbm9kZS5kb20gPSBvbGRWbm9kZS5kb207XG4gICAgcGF0Y2godi5tYWluVm5vZGUsIG9sZFZub2RlKTtcbiAgICBvbGRWbm9kZSA9IG51bGw7XG4gICAgaWYgKHYuaXNNb3VudGVkID09PSBmYWxzZSkge1xuICAgICAgb25Nb3VudExpc3QubGVuZ3RoICYmIGNhbGxDYWxsYmFja0xpc3Qob25Nb3VudExpc3QpO1xuICAgICAgdi5pc01vdW50ZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvblVwZGF0ZUxpc3QubGVuZ3RoICYmIGNhbGxDYWxsYmFja0xpc3Qob25VcGRhdGVMaXN0KTtcbiAgICB9XG5cbiAgICBpZiAoaXNOb2RlSnMpIHtcbiAgICAgIHJldHVybiB2Lm1haW5Wbm9kZS5kb20uaW5uZXJIVE1MO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1bm1vdW50KCk6IHZvaWQgfCBzdHJpbmcge1xuICBpZiAodi5pc01vdW50ZWQgJiYgdi5tYWluVm5vZGUgJiYgdi5jb21wb25lbnQpIHtcbiAgICBvbkNsZWFudXBMaXN0Lmxlbmd0aCAmJiBjYWxsQ2FsbGJhY2tMaXN0KG9uQ2xlYW51cExpc3QpO1xuICAgIG9uVW5tb3VudExpc3QubGVuZ3RoICYmIGNhbGxDYWxsYmFja0xpc3Qob25Vbm1vdW50TGlzdCk7XG4gICAgbGV0IG9sZFZub2RlOiBWbm9kZVdpdGhEb20gfCBudWxsID0gdi5tYWluVm5vZGUgYXMgVm5vZGVXaXRoRG9tO1xuICAgIHYubWFpblZub2RlID0gbmV3IFZub2RlKHYubWFpblZub2RlLnRhZywgdi5tYWluVm5vZGUucHJvcHMsIFtdKSBhcyBWbm9kZVdpdGhEb207XG4gICAgdi5tYWluVm5vZGUuZG9tID0gb2xkVm5vZGUuZG9tO1xuICAgIHYubWFpblZub2RlLmlzU1ZHID0gb2xkVm5vZGUuaXNTVkc7XG4gICAgcGF0Y2godi5tYWluVm5vZGUsIG9sZFZub2RlKTtcbiAgICBvbGRWbm9kZSA9IG51bGw7XG4gICAgdi5jb21wb25lbnQgPSBudWxsO1xuICAgIHYuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgaWYgKGlzTm9kZUpzKSB7XG4gICAgICByZXR1cm4gdi5tYWluVm5vZGUuZG9tLmlubmVySFRNTDtcbiAgICB9XG4gIH1cbn1cblxubGV0IGVtcHR5Vm5vZGUgPSBuZXcgVm5vZGUoXCJfX2VtcHR5X19cIiwge30sIFtdKTtcblxuZnVuY3Rpb24gb25yZW1vdmUodm5vZGU6IElWbm9kZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgdm5vZGUuY2hpbGRyZW5baV0udGFnICE9PSBUZXh0U3RyaW5nICYmIG9ucmVtb3ZlKHZub2RlLmNoaWxkcmVuW2ldKTtcbiAgfVxuXG4gIHZub2RlLnByb3BzLm9ucmVtb3ZlICYmIHZub2RlLnByb3BzLm9ucmVtb3ZlKHZub2RlKTtcbn1cblxuZnVuY3Rpb24gc2hhcmVkU2V0QXR0cmlidXRlKHByb3A6IHN0cmluZywgdmFsdWU6IGFueSwgdm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU/OiBWbm9kZVdpdGhEb20pOiB2b2lkIHwgYm9vbGVhbiB7XG4gIC8vIEl0IGlzIGEgcmVzZXJ2ZWQgcHJvcFxuICBpZiAocmVzZXJ2ZWRQcm9wc1twcm9wXSkge1xuICAgIC8vIElmIGl0IGlzIGEgZGlyZWN0aXZlIG5hbWUgY2FsbCB0aGUgZGlyZWN0aXZlXG4gICAgaWYgKGRpcmVjdGl2ZXNbcHJvcF0pIHtcbiAgICAgIHJldHVybiBkaXJlY3RpdmVzW3Byb3BdKHZub2RlLnByb3BzW3Byb3BdLCB2bm9kZSwgb2xkVm5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEl0IGlzIG5vdCBhIHJlc2VydmVkIHByb3Agc28gd2UgYWRkIGl0IHRvIHRoZSBkb21cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgaWYgKHByb3AgaW4gZXZlbnRMaXN0ZW5lck5hbWVzID09PSBmYWxzZSkge1xuICAgICAgZXZlbnRMaXN0ZW5lck5hbWVzW3Byb3BdID0gdHJ1ZTtcbiAgICAgICh2LmNvbnRhaW5lciBhcyBEb21FbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKHByb3Auc2xpY2UoMiksIGV2ZW50TGlzdGVuZXIpO1xuICAgIH1cbiAgICB2bm9kZS5kb21bYHYtJHtwcm9wfWBdID0gdmFsdWU7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHByb3AgaW4gdm5vZGUuZG9tICYmIHZub2RlLmlzU1ZHID09PSBmYWxzZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICBpZiAodm5vZGUuZG9tW3Byb3BdICE9IHZhbHVlKSB7XG4gICAgICB2bm9kZS5kb21bcHJvcF0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gVXNlIHNldCBhdHRyaWJ1dGVcbiAgaWYgKCFvbGRWbm9kZSB8fCBvbGRWbm9kZS5wcm9wc1twcm9wXSAhPT0gdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICB2bm9kZS5kb20ucmVtb3ZlQXR0cmlidXRlKHByb3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICB2bm9kZS5kb20uc2V0QXR0cmlidXRlKHByb3AsIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0QXR0cmlidXRlKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwgdm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU/OiBWbm9kZVdpdGhEb20pIHtcbiAgdm5vZGUucHJvcHNbbmFtZV0gPSB2YWx1ZTtcblxuICBzaGFyZWRTZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUsIHZub2RlLCBvbGRWbm9kZSk7XG59XG5cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXModm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU/OiBWbm9kZVdpdGhEb20pIHtcbiAgZm9yIChsZXQgcHJvcCBpbiB2bm9kZS5wcm9wcykge1xuICAgIGlmIChzaGFyZWRTZXRBdHRyaWJ1dGUocHJvcCwgdm5vZGUucHJvcHNbcHJvcF0sIHZub2RlLCBvbGRWbm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaWYgKG9sZFZub2RlKSB7XG4gICAgZm9yIChsZXQgcHJvcCBpbiBvbGRWbm9kZS5wcm9wcykge1xuICAgICAgaWYgKHByb3AgaW4gdm5vZGUucHJvcHMgPT09IGZhbHNlICYmIHR5cGVvZiBvbGRWbm9kZS5wcm9wc1twcm9wXSAhPT0gXCJmdW5jdGlvblwiICYmIHByb3AgaW4gcmVzZXJ2ZWRQcm9wcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHByb3AgaW4gb2xkVm5vZGUuZG9tICYmIHZub2RlLmlzU1ZHID09PSBmYWxzZSkge1xuICAgICAgICAgIG9sZFZub2RlLmRvbVtwcm9wXSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2xkVm5vZGUuZG9tLnJlbW92ZUF0dHJpYnV0ZShwcm9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gcGF0Y2gobmV3Vm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU6IFZub2RlV2l0aERvbSB8IElWbm9kZSA9IGVtcHR5Vm5vZGUpIHtcbiAgY3VycmVudC52bm9kZSA9IG5ld1Zub2RlO1xuICBjdXJyZW50Lm9sZFZub2RlID0gb2xkVm5vZGUgPT09IGVtcHR5Vm5vZGUgPyBVbmQgOiAob2xkVm5vZGUgYXMgVm5vZGVXaXRoRG9tKTtcbiAgbGV0IG5ld1RyZWUgPSBuZXdWbm9kZS5jaGlsZHJlbjtcbiAgbGV0IG9sZFRyZWUgPSBvbGRWbm9kZS5jaGlsZHJlbjtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1RyZWUubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgY2hpbGRWbm9kZSA9IG5ld1RyZWVbaV07XG4gICAgaWYgKGNoaWxkVm5vZGUgaW5zdGFuY2VvZiBWbm9kZSkge1xuICAgICAgaWYgKGNoaWxkVm5vZGUudGFnICE9PSBUZXh0U3RyaW5nKSB7XG4gICAgICAgIGlmIChjaGlsZFZub2RlLnRhZyA9PT0gQ29tcG9uZW50U3RyaW5nKSB7XG4gICAgICAgICAgbGV0IGNvbXBvbmVudCA9IGNoaWxkVm5vZGUuY29tcG9uZW50IGFzIFZhbHlyaWFuQ29tcG9uZW50O1xuICAgICAgICAgIGN1cnJlbnQuY29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgICAgICAgIGxldCByZXN1bHQgPSAoXCJ2aWV3XCIgaW4gY29tcG9uZW50ID8gY29tcG9uZW50LnZpZXcgOiBjb21wb25lbnQpLmNhbGwoY29tcG9uZW50LCBjaGlsZFZub2RlLnByb3BzLCAuLi5jaGlsZFZub2RlLmNoaWxkcmVuKTtcblxuICAgICAgICAgIG5ld1RyZWUuc3BsaWNlKGktLSwgMSwgcmVzdWx0KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjaGlsZFZub2RlLmlzU1ZHID0gbmV3Vm5vZGUuaXNTVkcgfHwgY2hpbGRWbm9kZS50YWcgPT09IFwic3ZnXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNoaWxkVm5vZGUpKSB7XG4gICAgICBuZXdUcmVlLnNwbGljZShpLS0sIDEsIC4uLmNoaWxkVm5vZGUpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGRWbm9kZSA9PT0gbnVsbCB8fCBjaGlsZFZub2RlID09PSBVbmQpIHtcbiAgICAgIG5ld1RyZWUuc3BsaWNlKGktLSwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1RyZWVbaV0gPSBuZXcgVm5vZGUoVGV4dFN0cmluZywge30sIFtdKTtcbiAgICAgIG5ld1RyZWVbaV0ubm9kZVZhbHVlID0gY2hpbGRWbm9kZTtcbiAgICB9XG4gIH1cblxuICBsZXQgb2xkVHJlZUxlbmd0aCA9IG9sZFRyZWUubGVuZ3RoO1xuICBsZXQgbmV3VHJlZUxlbmd0aCA9IG5ld1RyZWUubGVuZ3RoO1xuXG4gIC8vIElmIG5ldyB0cmVlIGlzIGVtcHR5LCByZW1vdmUgYWxsIG9sZCBub2Rlc1xuICBpZiAobmV3VHJlZUxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2xkVHJlZUxlbmd0aDsgaSsrKSB7XG4gICAgICBvbGRUcmVlW2ldLnRhZyAhPT0gVGV4dFN0cmluZyAmJiBvbnJlbW92ZShvbGRUcmVlW2ldKTtcbiAgICB9XG5cbiAgICBuZXdWbm9kZS5kb20udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIElmIHRoZSB0cmVlIGlzIGtleWVkIGxpc3QgYW5kIGlzIG5vdCBmaXJzdCByZW5kZXIgYW5kIG9sZCB0cmVlIGlzIGtleWVkIGxpc3QgdG9vXG4gIGlmIChvbGRUcmVlTGVuZ3RoICYmIFwia2V5XCIgaW4gbmV3VHJlZVswXS5wcm9wcyAmJiBcImtleVwiIGluIG9sZFRyZWVbMF0ucHJvcHMpIHtcbiAgICBsZXQgb2xkS2V5ZWRMaXN0OiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvbGRUcmVlTGVuZ3RoOyBpKyspIHtcbiAgICAgIG9sZEtleWVkTGlzdFtvbGRUcmVlW2ldLnByb3BzLmtleV0gPSBpO1xuICAgIH1cblxuICAgIGxldCBuZXdLZXllZExpc3Q6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1RyZWVMZW5ndGg7IGkrKykge1xuICAgICAgbmV3S2V5ZWRMaXN0W25ld1RyZWVbaV0ucHJvcHMua2V5XSA9IGk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdUcmVlTGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBjaGlsZFZub2RlID0gbmV3VHJlZVtpXTtcbiAgICAgIGxldCBvbGRDaGlsZFZub2RlID0gb2xkVHJlZVtvbGRLZXllZExpc3RbY2hpbGRWbm9kZS5wcm9wcy5rZXldXTtcbiAgICAgIGxldCBzaG91bGRQYXRjaCA9IHRydWU7XG5cbiAgICAgIGlmIChvbGRDaGlsZFZub2RlKSB7XG4gICAgICAgIGNoaWxkVm5vZGUuZG9tID0gb2xkQ2hpbGRWbm9kZS5kb207XG4gICAgICAgIGlmIChcInYtb25jZVwiIGluIGNoaWxkVm5vZGUucHJvcHMgfHwgKGNoaWxkVm5vZGUucHJvcHMuc2hvdWxkdXBkYXRlICYmIGNoaWxkVm5vZGUucHJvcHMuc2hvdWxkdXBkYXRlKGNoaWxkVm5vZGUsIG9sZENoaWxkVm5vZGUpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAvLyBza2lwIHRoaXMgcGF0Y2hcbiAgICAgICAgICBjaGlsZFZub2RlLmNoaWxkcmVuID0gb2xkQ2hpbGRWbm9kZS5jaGlsZHJlbjtcbiAgICAgICAgICBzaG91bGRQYXRjaCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEF0dHJpYnV0ZXMoY2hpbGRWbm9kZSwgb2xkQ2hpbGRWbm9kZSk7XG4gICAgICAgICAgaWYgKHYuaXNNb3VudGVkKSB7XG4gICAgICAgICAgICBjaGlsZFZub2RlLnByb3BzLm9udXBkYXRlICYmIGNoaWxkVm5vZGUucHJvcHMub251cGRhdGUoY2hpbGRWbm9kZSwgb2xkQ2hpbGRWbm9kZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoaWxkVm5vZGUucHJvcHMub25jcmVhdGUgJiYgY2hpbGRWbm9kZS5wcm9wcy5vbmNyZWF0ZShjaGlsZFZub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkVm5vZGUuZG9tID0gY3JlYXRlRG9tRWxlbWVudChjaGlsZFZub2RlLnRhZywgY2hpbGRWbm9kZS5pc1NWRyk7XG4gICAgICAgIHNldEF0dHJpYnV0ZXMoY2hpbGRWbm9kZSk7XG4gICAgICAgIGNoaWxkVm5vZGUucHJvcHMub25jcmVhdGUgJiYgY2hpbGRWbm9kZS5wcm9wcy5vbmNyZWF0ZShjaGlsZFZub2RlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5ld1Zub2RlLmRvbS5jaGlsZE5vZGVzW2ldID09PSBVbmQpIHtcbiAgICAgICAgbmV3Vm5vZGUuZG9tLmFwcGVuZENoaWxkKGNoaWxkVm5vZGUuZG9tKTtcbiAgICAgIH0gZWxzZSBpZiAobmV3Vm5vZGUuZG9tLmNoaWxkTm9kZXNbaV0gIT09IGNoaWxkVm5vZGUuZG9tKSB7XG4gICAgICAgIG9sZFRyZWVbaV0gJiYgbmV3S2V5ZWRMaXN0W29sZFRyZWVbaV0ucHJvcHMua2V5XSA9PT0gVW5kICYmIG9ucmVtb3ZlKG9sZFRyZWVbaV0pO1xuICAgICAgICBuZXdWbm9kZS5kb20ucmVwbGFjZUNoaWxkKGNoaWxkVm5vZGUuZG9tLCBuZXdWbm9kZS5kb20uY2hpbGROb2Rlc1tpXSk7XG4gICAgICB9XG5cbiAgICAgIHNob3VsZFBhdGNoICYmIHBhdGNoKGNoaWxkVm5vZGUsIG9sZENoaWxkVm5vZGUpO1xuICAgIH1cblxuICAgIC8vIEZvciB0aGUgcmVzdCBvZiB0aGUgY2hpbGRyZW4sIHdlIHNob3VsZCByZW1vdmUgdGhlbVxuICAgIGZvciAobGV0IGkgPSBuZXdUcmVlTGVuZ3RoOyBpIDwgb2xkVHJlZUxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobmV3S2V5ZWRMaXN0W29sZFRyZWVbaV0ucHJvcHMua2V5XSA9PT0gVW5kKSB7XG4gICAgICAgIGxldCBvbGRDaGlsZFZub2RlID0gb2xkVHJlZVtpXTtcbiAgICAgICAgb25yZW1vdmUob2xkQ2hpbGRWbm9kZSk7XG4gICAgICAgIG9sZENoaWxkVm5vZGUuZG9tLnBhcmVudE5vZGUgJiYgb2xkQ2hpbGRWbm9kZS5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRDaGlsZFZub2RlLmRvbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSWYgbmV3IHRyZWUgYW5kIG9sZCB0cmVlIGhhdmUgbW9yZSB0aGFuIG9uZSBjaGlsZCwgd2Ugc2hvdWxkIHVwZGF0ZSB0aGUgZG9tXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3VHJlZUxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IG5ld0NoaWxkVm5vZGUgPSBuZXdUcmVlW2ldO1xuXG4gICAgLy8gT2xkIGNoaWxkIGV4aXN0c1xuICAgIGlmIChpIDwgb2xkVHJlZUxlbmd0aCkge1xuICAgICAgbGV0IG9sZENoaWxkVm5vZGUgPSBvbGRUcmVlW2ldO1xuICAgICAgLy8gTmV3IGNoaWxkIGlzIGEgdGV4dCBub2RlXG4gICAgICBpZiAobmV3Q2hpbGRWbm9kZS50YWcgPT09IFRleHRTdHJpbmcpIHtcbiAgICAgICAgLy8gT2xkIGNoaWxkIGlzIGEgdGV4dCBub2RlXG4gICAgICAgIGlmIChvbGRDaGlsZFZub2RlLnRhZyA9PT0gVGV4dFN0cmluZykge1xuICAgICAgICAgIG5ld0NoaWxkVm5vZGUuZG9tID0gb2xkQ2hpbGRWbm9kZS5kb207XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuICAgICAgICAgIGlmIChuZXdDaGlsZFZub2RlLmRvbS5ub2RlVmFsdWUgIT0gbmV3Q2hpbGRWbm9kZS5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgIG5ld0NoaWxkVm5vZGUuZG9tLm5vZGVWYWx1ZSA9IG5ld0NoaWxkVm5vZGUubm9kZVZhbHVlIGFzIHN0cmluZztcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbGQgY2hpbGQgaXMgYSBub3JtYWwgbm9kZVxuICAgICAgICBuZXdDaGlsZFZub2RlLmRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5ld0NoaWxkVm5vZGUubm9kZVZhbHVlIGFzIHN0cmluZykgYXMgdW5rbm93biBhcyBEb21FbGVtZW50O1xuICAgICAgICBvbnJlbW92ZShvbGRDaGlsZFZub2RlKTtcbiAgICAgICAgbmV3Vm5vZGUuZG9tLnJlcGxhY2VDaGlsZChuZXdDaGlsZFZub2RlLmRvbSwgb2xkQ2hpbGRWbm9kZS5kb20pO1xuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBOZXcgY2hpbGQgaXMgYSBub3JtYWwgbm9kZVxuICAgICAgLy8gT2xkIGNoaWxkIGlzIHRoZSBzYW1lIHR5cGUgYXMgbmV3IGNoaWxkXG4gICAgICBpZiAob2xkQ2hpbGRWbm9kZS50YWcgPT09IG5ld0NoaWxkVm5vZGUudGFnKSB7XG4gICAgICAgIG5ld0NoaWxkVm5vZGUuZG9tID0gb2xkQ2hpbGRWbm9kZS5kb207XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSB2LW9uY2UgZGlyZWN0aXZlIG9yIGEgc2hvdWxkdXBkYXRlIG1ldGhvZCB0aGF0IHJldHVybnMgZmFsc2UsIHdlIHNraXAgdGhlIHVwZGF0ZVxuICAgICAgICBpZiAobmV3Q2hpbGRWbm9kZS5wcm9wc1tcInYtb25jZVwiXSB8fCAobmV3Q2hpbGRWbm9kZS5wcm9wcy5zaG91bGR1cGRhdGUgJiYgbmV3Q2hpbGRWbm9kZS5wcm9wcy5zaG91bGR1cGRhdGUobmV3Q2hpbGRWbm9kZSwgb2xkQ2hpbGRWbm9kZSkgPT09IGZhbHNlKSkge1xuICAgICAgICAgIG5ld0NoaWxkVm5vZGUuY2hpbGRyZW4gPSBvbGRDaGlsZFZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UgdXBkYXRlIHRoZSBkb20gZWxlbWVudFxuICAgICAgICBzZXRBdHRyaWJ1dGVzKG5ld0NoaWxkVm5vZGUsIG9sZENoaWxkVm5vZGUpO1xuICAgICAgICBpZiAodi5pc01vdW50ZWQpIHtcbiAgICAgICAgICBuZXdDaGlsZFZub2RlLnByb3BzLm9udXBkYXRlICYmIG5ld0NoaWxkVm5vZGUucHJvcHMub251cGRhdGUobmV3Q2hpbGRWbm9kZSwgb2xkQ2hpbGRWbm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3Q2hpbGRWbm9kZS5wcm9wcy5vbmNyZWF0ZSAmJiBuZXdDaGlsZFZub2RlLnByb3BzLm9uY3JlYXRlKG5ld0NoaWxkVm5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF0Y2gobmV3Q2hpbGRWbm9kZSwgb2xkQ2hpbGRWbm9kZSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBPbGQgY2hpbGQgaXMgb2YgYSBkaWZmZXJlbnQgdHlwZSB0aGFuIG5ldyBjaGlsZFxuICAgICAgbmV3Q2hpbGRWbm9kZS5kb20gPSBjcmVhdGVEb21FbGVtZW50KG5ld0NoaWxkVm5vZGUudGFnLCBuZXdDaGlsZFZub2RlLmlzU1ZHKTtcbiAgICAgIHNldEF0dHJpYnV0ZXMobmV3Q2hpbGRWbm9kZSk7XG4gICAgICBvbGRDaGlsZFZub2RlLnRhZyAhPT0gVGV4dFN0cmluZyAmJiBvbnJlbW92ZShvbGRDaGlsZFZub2RlKTtcbiAgICAgIG5ld0NoaWxkVm5vZGUucHJvcHMub25jcmVhdGUgJiYgbmV3Q2hpbGRWbm9kZS5wcm9wcy5vbmNyZWF0ZShuZXdDaGlsZFZub2RlKTtcbiAgICAgIG5ld1Zub2RlLmRvbS5yZXBsYWNlQ2hpbGQobmV3Q2hpbGRWbm9kZS5kb20sIG9sZENoaWxkVm5vZGUuZG9tKTtcbiAgICAgIHBhdGNoKG5ld0NoaWxkVm5vZGUsIGVtcHR5Vm5vZGUpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gT2xkIGNoaWxkIGRvZXMgbm90IGV4aXN0c1xuICAgIC8vIE5ldyBjaGlsZCBpcyBhIHRleHQgbm9kZVxuICAgIGlmIChuZXdDaGlsZFZub2RlLnRhZyA9PT0gVGV4dFN0cmluZykge1xuICAgICAgbmV3Q2hpbGRWbm9kZS5kb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuZXdDaGlsZFZub2RlLm5vZGVWYWx1ZSBhcyBzdHJpbmcpIGFzIHVua25vd24gYXMgRG9tRWxlbWVudDtcbiAgICAgIG5ld1Zub2RlLmRvbS5hcHBlbmRDaGlsZChuZXdDaGlsZFZub2RlLmRvbSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBOZXcgY2hpbGQgaXMgYSBub3JtYWwgbm9kZVxuICAgIG5ld0NoaWxkVm5vZGUuZG9tID0gY3JlYXRlRG9tRWxlbWVudChuZXdDaGlsZFZub2RlLnRhZywgbmV3Q2hpbGRWbm9kZS5pc1NWRyk7XG4gICAgc2V0QXR0cmlidXRlcyhuZXdDaGlsZFZub2RlKTtcbiAgICBuZXdWbm9kZS5kb20uYXBwZW5kQ2hpbGQobmV3Q2hpbGRWbm9kZS5kb20pO1xuICAgIG5ld0NoaWxkVm5vZGUucHJvcHMub25jcmVhdGUgJiYgbmV3Q2hpbGRWbm9kZS5wcm9wcy5vbmNyZWF0ZShuZXdDaGlsZFZub2RlKTtcbiAgICBwYXRjaChuZXdDaGlsZFZub2RlLCBlbXB0eVZub2RlKTtcbiAgfVxuXG4gIC8vIEZvciB0aGUgcmVzdCBvZiB0aGUgY2hpbGRyZW4sIHdlIHNob3VsZCByZW1vdmUgdGhlbVxuICBmb3IgKGxldCBpID0gbmV3VHJlZUxlbmd0aDsgaSA8IG9sZFRyZWVMZW5ndGg7IGkrKykge1xuICAgIGxldCBvbGRDaGlsZFZub2RlID0gb2xkVHJlZVtpXTtcbiAgICBvbGRDaGlsZFZub2RlLnRhZyAhPT0gVGV4dFN0cmluZyAmJiBvbnJlbW92ZShvbGRDaGlsZFZub2RlKTtcbiAgICBvbGRDaGlsZFZub2RlLmRvbS5wYXJlbnROb2RlICYmIG9sZENoaWxkVm5vZGUuZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2xkQ2hpbGRWbm9kZS5kb20pO1xuICB9XG59XG5cbi8qKiogRGlyZWN0aXZlcyAqKiovXG5cbmZ1bmN0aW9uIGRpcmVjdGl2ZShuYW1lOiBzdHJpbmcsIGRpcmVjdGl2ZTogRGlyZWN0aXZlKSB7XG4gIGxldCBmdWxsTmFtZSA9IGB2LSR7bmFtZX1gO1xuICBkaXJlY3RpdmVzW2Z1bGxOYW1lXSA9IGRpcmVjdGl2ZTtcbiAgcmVzZXJ2ZWRQcm9wc1tmdWxsTmFtZV0gPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBoaWRlRGlyZWN0aXZlKHRlc3Q6IGJvb2xlYW4pOiBEaXJlY3RpdmUge1xuICByZXR1cm4gKGJvb2w6IGJvb2xlYW4sIHZub2RlOiBJVm5vZGUsIG9sZFZub2RlPzogSVZub2RlKSA9PiB7XG4gICAgbGV0IHZhbHVlID0gdGVzdCA/IGJvb2wgOiAhYm9vbDtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGxldCBuZXdkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcbiAgICAgIGlmIChvbGRWbm9kZSAmJiBvbGRWbm9kZS5kb20gJiYgb2xkVm5vZGUuZG9tLnBhcmVudE5vZGUpIHtcbiAgICAgICAgb2xkVm5vZGUudGFnICE9PSBUZXh0U3RyaW5nICYmIG9ucmVtb3ZlKG9sZFZub2RlKTtcbiAgICAgICAgb2xkVm5vZGUuZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld2RvbSwgb2xkVm5vZGUuZG9tKTtcbiAgICAgIH1cbiAgICAgIHZub2RlLnRhZyA9IFRleHRTdHJpbmc7XG4gICAgICB2bm9kZS5jaGlsZHJlbiA9IFtdO1xuICAgICAgdm5vZGUucHJvcHMgPSB7fTtcbiAgICAgIHZub2RlLmRvbSA9IG5ld2RvbSBhcyB1bmtub3duIGFzIERvbUVsZW1lbnQ7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBkaXJlY3RpdmVzOiBEaXJlY3RpdmVzID0ge1xuICBcInYtaWZcIjogaGlkZURpcmVjdGl2ZShmYWxzZSksXG4gIFwidi11bmxlc3NcIjogaGlkZURpcmVjdGl2ZSh0cnVlKSxcbiAgXCJ2LWZvclwiOiAoc2V0OiB1bmtub3duW10sIHZub2RlOiBWbm9kZVdpdGhEb20pID0+IHtcbiAgICB2bm9kZS5jaGlsZHJlbiA9IHNldC5tYXAodm5vZGUuY2hpbGRyZW5bMF0pO1xuICB9LFxuICBcInYtc2hvd1wiOiAoYm9vbDogYm9vbGVhbiwgdm5vZGU6IFZub2RlV2l0aERvbSkgPT4ge1xuICAgICh2bm9kZS5kb20gYXMgdW5rbm93biBhcyB7IHN0eWxlOiB7IGRpc3BsYXk6IHN0cmluZyB9IH0pLnN0eWxlLmRpc3BsYXkgPSBib29sID8gXCJcIiA6IFwibm9uZVwiO1xuICB9LFxuICBcInYtY2xhc3NcIjogKGNsYXNzZXM6IHsgW3g6IHN0cmluZ106IGJvb2xlYW4gfSwgdm5vZGU6IFZub2RlV2l0aERvbSkgPT4ge1xuICAgIGZvciAobGV0IG5hbWUgaW4gY2xhc3Nlcykge1xuICAgICAgKHZub2RlLmRvbSBhcyBEb21FbGVtZW50KS5jbGFzc0xpc3QudG9nZ2xlKG5hbWUsIGNsYXNzZXNbbmFtZV0pO1xuICAgIH1cbiAgfSxcbiAgXCJ2LWh0bWxcIjogKGh0bWw6IHN0cmluZywgdm5vZGU6IFZub2RlV2l0aERvbSkgPT4ge1xuICAgIHZub2RlLmNoaWxkcmVuID0gW3RydXN0KGh0bWwpXTtcbiAgfSxcbiAgXCJ2LW1vZGVsXCI6IChbbW9kZWwsIHByb3BlcnR5LCBldmVudF06IGFueVtdLCB2bm9kZTogVm5vZGVXaXRoRG9tLCBvbGRWbm9kZT86IFZub2RlV2l0aERvbSkgPT4ge1xuICAgIGxldCB2YWx1ZTtcbiAgICBsZXQgaGFuZGxlcjtcbiAgICBpZiAodm5vZGUudGFnID09PSBcImlucHV0XCIpIHtcbiAgICAgIGV2ZW50ID0gZXZlbnQgfHwgXCJvbmlucHV0XCI7XG4gICAgICBzd2l0Y2ggKHZub2RlLnByb3BzLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtb2RlbFtwcm9wZXJ0eV0pKSB7XG4gICAgICAgICAgICBoYW5kbGVyID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGxldCB2YWwgPSAoZS50YXJnZXQgYXMgRG9tRWxlbWVudCAmIFJlY29yZDxzdHJpbmcsIGFueT4pLnZhbHVlO1xuICAgICAgICAgICAgICBsZXQgaWR4ID0gbW9kZWxbcHJvcGVydHldLmluZGV4T2YodmFsKTtcbiAgICAgICAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0ucHVzaCh2YWwpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhbHVlID0gbW9kZWxbcHJvcGVydHldLmluZGV4T2Yodm5vZGUuZG9tLnZhbHVlKSAhPT0gLTE7XG4gICAgICAgICAgfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gdm5vZGUucHJvcHMpIHtcbiAgICAgICAgICAgIGhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChtb2RlbFtwcm9wZXJ0eV0gPT09IHZub2RlLnByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbW9kZWxbcHJvcGVydHldID0gbnVsbDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0gPSB2bm9kZS5wcm9wcy52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhbHVlID0gbW9kZWxbcHJvcGVydHldID09PSB2bm9kZS5wcm9wcy52YWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlciA9ICgpID0+IChtb2RlbFtwcm9wZXJ0eV0gPSAhbW9kZWxbcHJvcGVydHldKTtcbiAgICAgICAgICAgIHZhbHVlID0gbW9kZWxbcHJvcGVydHldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIHZhbHVlLCB2bm9kZSwgb2xkVm5vZGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyYWRpb1wiOiB7XG4gICAgICAgICAgc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBtb2RlbFtwcm9wZXJ0eV0gPT09IHZub2RlLmRvbS52YWx1ZSwgdm5vZGUsIG9sZFZub2RlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgbW9kZWxbcHJvcGVydHldLCB2bm9kZSwgb2xkVm5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2bm9kZS50YWcgPT09IFwic2VsZWN0XCIpIHtcbiAgICAgIGV2ZW50ID0gZXZlbnQgfHwgXCJvbmNsaWNrXCI7XG4gICAgICBpZiAodm5vZGUucHJvcHMubXVsdGlwbGUpIHtcbiAgICAgICAgaGFuZGxlciA9IChlOiBFdmVudCAmIFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgICAgICAgICBsZXQgdmFsID0gKGUudGFyZ2V0IGFzIERvbUVsZW1lbnQgJiBSZWNvcmQ8c3RyaW5nLCBhbnk+KS52YWx1ZTtcbiAgICAgICAgICBpZiAoZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICBsZXQgaWR4ID0gbW9kZWxbcHJvcGVydHldLmluZGV4T2YodmFsKTtcbiAgICAgICAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XS5wdXNoKHZhbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XS5zcGxpY2UoMCwgbW9kZWxbcHJvcGVydHldLmxlbmd0aCk7XG4gICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0ucHVzaCh2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IElWbm9kZSkgPT4ge1xuICAgICAgICAgIGlmIChjaGlsZC50YWcgPT09IFwib3B0aW9uXCIpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IFwidmFsdWVcIiBpbiBjaGlsZC5wcm9wcyA/IGNoaWxkLnByb3BzLnZhbHVlIDogY2hpbGQuY2hpbGRyZW4uam9pbihcIlwiKS50cmltKCk7XG4gICAgICAgICAgICBjaGlsZC5wcm9wcy5zZWxlY3RlZCA9IG1vZGVsW3Byb3BlcnR5XS5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBJVm5vZGUpID0+IHtcbiAgICAgICAgICBpZiAoY2hpbGQudGFnID09PSBcIm9wdGlvblwiKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBcInZhbHVlXCIgaW4gY2hpbGQucHJvcHMgPyBjaGlsZC5wcm9wcy52YWx1ZSA6IGNoaWxkLmNoaWxkcmVuLmpvaW4oXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgY2hpbGQucHJvcHMuc2VsZWN0ZWQgPSB2YWx1ZSA9PT0gbW9kZWxbcHJvcGVydHldO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2bm9kZS50YWcgPT09IFwidGV4dGFyZWFcIikge1xuICAgICAgZXZlbnQgPSBldmVudCB8fCBcIm9uaW5wdXRcIjtcbiAgICAgIHZub2RlLmNoaWxkcmVuID0gW21vZGVsW3Byb3BlcnR5XV07XG4gICAgfVxuXG4gICAgaWYgKCF2bm9kZS5wcm9wc1tldmVudF0pIHtcbiAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICBoYW5kbGVyID0gKGU6IEV2ZW50KSA9PiAobW9kZWxbcHJvcGVydHldID0gKGUudGFyZ2V0IGFzIERvbUVsZW1lbnQgJiBSZWNvcmQ8c3RyaW5nLCBhbnk+KS52YWx1ZSk7XG4gICAgICB9XG4gICAgICBzZXRBdHRyaWJ1dGUoZXZlbnQsIGhhbmRsZXIsIHZub2RlLCBvbGRWbm9kZSk7XG4gICAgfVxuICB9XG59O1xuXG4vKioqIFBsdWdpbnMgKioqL1xuY29uc3QgcGx1Z2lucyA9IG5ldyBNYXA8UGx1Z2luLCBhbnk+KCk7XG5cbmZ1bmN0aW9uIHVzZShwbHVnaW46IFBsdWdpbiwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2wsIGFueT4pOiB2b2lkIHwgYW55IHtcbiAgaWYgKHBsdWdpbnMuaGFzKHBsdWdpbikpIHtcbiAgICByZXR1cm4gcGx1Z2lucy5nZXQocGx1Z2luKTtcbiAgfVxuXG4gIGxldCByZXN1bHQgPSBwbHVnaW4odiwgb3B0aW9ucyk7XG4gIHBsdWdpbnMuc2V0KHBsdWdpbiwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqKiBIeXBlcnNjcmlwdCAqKiovXG5cbmNvbnN0IHY6IFZhbHlyaWFuID0gZnVuY3Rpb24gdih0YWdPckNvbXBvbmVudDogc3RyaW5nIHwgVmFseXJpYW5Db21wb25lbnQsIHByb3BzOiBQcm9wcywgLi4uY2hpbGRyZW46IENoaWxkcmVuKTogSVZub2RlIHwgVm5vZGVDb21wb25lbnQge1xuICBpZiAodHlwZW9mIHRhZ09yQ29tcG9uZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIG5ldyBWbm9kZSh0YWdPckNvbXBvbmVudCwgcHJvcHMgfHwge30sIGNoaWxkcmVuKTtcbiAgfVxuXG4gIGNvbnN0IHZub2RlID0gbmV3IFZub2RlKFwiX19jb21wb25lbnRfX1wiLCBwcm9wcyB8fCB7fSwgY2hpbGRyZW4pO1xuICB2bm9kZS5jb21wb25lbnQgPSB0YWdPckNvbXBvbmVudDtcbiAgcmV0dXJuIHZub2RlIGFzIFZub2RlQ29tcG9uZW50O1xufTtcblxudi5mcmFnbWVudCA9IChwcm9wczogUHJvcHMsIC4uLmNoaWxkcmVuOiBDaGlsZHJlbik6IENoaWxkcmVuID0+IHtcbiAgcmV0dXJuIGNoaWxkcmVuO1xufTtcblxuLyoqKiBWIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgKioqL1xuLy8gVGhpcyBpcyBpbnRlbmRlZCB0byBtYWtlIHRoZSBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGF2YWlsYWJsZSBmb3IgcGx1Z2luc1xudi5jdXJyZW50ID0gY3VycmVudDtcblxudi5kaXJlY3RpdmVzID0gZGlyZWN0aXZlcztcblxudi5yZXNlcnZlZFByb3BzID0gcmVzZXJ2ZWRQcm9wcztcblxudi5pc1Zub2RlID0gaXNWbm9kZTtcbnYuaXNDb21wb25lbnQgPSBpc0NvbXBvbmVudDtcbnYuaXNWbm9kZUNvbXBvbmVudCA9IGlzVm5vZGVDb21wb25lbnQ7XG5cbnYuaXNNb3VudGVkID0gZmFsc2U7XG52LmlzTm9kZUpzID0gaXNOb2RlSnM7XG52LnRydXN0ID0gdHJ1c3Q7XG5cbnYub25DbGVhbnVwID0gb25DbGVhbnVwO1xudi5vblVubW91bnQgPSBvblVubW91bnQ7XG52Lm9uTW91bnQgPSBvbk1vdW50O1xudi5vblVwZGF0ZSA9IG9uVXBkYXRlO1xuXG52Lm1vdW50ID0gbW91bnQ7XG52LnVubW91bnQgPSB1bm1vdW50O1xudi51cGRhdGUgPSB1cGRhdGU7XG5cbnYuc2V0QXR0cmlidXRlID0gc2V0QXR0cmlidXRlO1xudi5kaXJlY3RpdmUgPSBkaXJlY3RpdmU7XG52LnVzZSA9IHVzZTtcblxuZXhwb3J0IGRlZmF1bHQgdjtcbiIsICJpbXBvcnQgXCIuL2J1c2luZXNzLWxvZ2ljL2NyeXB0by1jYWxjdWxhdG9yLXNlcnZpY2VcIjtcblxuaW1wb3J0IHYgZnJvbSBcInZhbHlyaWFuLmpzL2xpYlwiO1xuXG52Lm1vdW50KFwiYm9keVwiLCAoKSA9PiA8ZGl2PkhlbGxvIFdvcmxkPC9kaXY+KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQSxVQUFNLFlBQVcsUUFBUSxPQUFPLFlBQVksZUFBZSxRQUFRLFlBQVksUUFBUSxTQUFTLElBQUk7QUFFcEcseUJBQW1CLEtBQUssUUFBUTtBQUM5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LFFBQ0g7QUFBQSxNQUNGLFdBQVcsTUFBTSxRQUFRLFlBQVk7QUFDbkMsZ0JBQVEsU0FBUztBQUNqQixjQUFNLFdBQVcsQ0FBQyxNQUFNLFNBQVM7QUFBQSxNQUNuQztBQUVBLFVBQUksQ0FBQyxNQUFNLE1BQU0sUUFBUTtBQUN2QixZQUFJLENBQUMsU0FBUztBQUNaLG9CQUFVLENBQUMsTUFBYyxNQUFNLFlBQWEsRUFBRSxPQUE0QztBQUFBLFFBQzVGO0FBQ0EscUJBQWEsT0FBTyxTQUFTLE9BQU8sUUFBUTtBQUFBLE1BQzlDO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFHQSxNQUFNLFVBQVUsb0JBQUksSUFBaUI7QUFFckMsZUFBYSxRQUFnQixTQUE2RDtBQUN4RixRQUFJLFFBQVEsSUFBSSxNQUFNLEdBQUc7QUFDdkIsYUFBTyxRQUFRLElBQUksTUFBTTtBQUFBLElBQzNCO0FBRUEsUUFBSSxTQUFTLE9BQU8sR0FBRyxPQUFPO0FBQzlCLFlBQVEsSUFBSSxRQUFRLE1BQU07QUFDMUIsV0FBTztBQUFBLEVBQ1Q7QUFJQSxNQUFNLElBQWMsWUFBVyxnQkFBNEMsVUFBaUIsVUFBNkM7QUFDdkksUUFBSSxPQUFPLG1CQUFtQixVQUFVO0FBQ3RDLGFBQU8sSUFBSSxNQUFNLGdCQUFnQixTQUFTLENBQUMsR0FBRyxRQUFRO0FBQUEsSUFDeEQ7QUFFQSxVQUFNLFFBQVEsSUFBSSxNQUFNLGlCQUFpQixTQUFTLENBQUMsR0FBRyxRQUFRO0FBQzlELFVBQU0sWUFBWTtBQUNsQixXQUFPO0FBQUEsRUFDVDtBQUVBLElBQUUsV0FBVyxDQUFDLFVBQWlCLGFBQWlDO0FBQzlELFdBQU87QUFBQSxFQUNUO0FBSUEsSUFBRSxVQUFVO0FBRVosSUFBRSxhQUFhO0FBRWYsSUFBRSxnQkFBZ0I7QUFFbEIsSUFBRSxVQUFVO0FBQ1osSUFBRSxjQUFjO0FBQ2hCLElBQUUsbUJBQW1CO0FBRXJCLElBQUUsWUFBWTtBQUNkLElBQUUsV0FBVztBQUNiLElBQUUsUUFBUTtBQUVWLElBQUUsWUFBWTtBQUNkLElBQUUsWUFBWTtBQUNkLElBQUUsVUFBVTtBQUNaLElBQUUsV0FBVztBQUViLElBQUUsUUFBUTtBQUNWLElBQUUsVUFBVTtBQUNaLElBQUUsU0FBUztBQUVYLElBQUUsZUFBZTtBQUNqQixJQUFFLFlBQVk7QUFDZCxJQUFFLE1BQU07QUFFUixNQUFPLGNBQVE7OztBQzFxQmYsY0FBRSxNQUFNLFFBQVEsTUFBTSw0QkFBQyxhQUFJLGFBQVcsQ0FBTTsiLAogICJuYW1lcyI6IFtdCn0K